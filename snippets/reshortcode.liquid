{% capture reloadnew %}{{ reload | replace: '<!--[', '[' }}{% endcapture %}{% capture reloadnew %}{{ reloadnew | replace: ']-->', ']' }}{% endcapture %}{% capture reloadnew %}{{ reloadnew | replace: ']</p>', ']' }}{% endcapture %}{% capture reloadnew %}{{ reloadnew | replace: '<p>[', '[' }}{% endcapture %}{% assign reshortcodeBegins = reloadnew | split: '[' %}{% if reshortcodeBegins.size > 1 %} {% for reshortcodeBegin in reshortcodeBegins %} {% if forloop.first %} {{reshortcodeBegin}} {% else %} {% assign reshortcodeEnds = reshortcodeBegin | split: ']' %} {% capture reshortcodeFull %}{{reshortcodeEnds[0]}}{% endcapture %} {% assign reshortcodeFull = reshortcodeFull | replace: ' ', ' ' %} {% assign reshortcodes = reshortcodeFull | split: '"' %} {% assign revariables = '' %} {% assign keys = '' %}{% assign rethecycle = 'even' %} {% for resection in reshortcodes %} {% if rethecycle == 'odd' %} {% assign rethecycle = 'even' %} {% else %} {% assign rethecycle = 'odd'%} {% endif %} {% if forloop.first %} {% if forloop.last %} {% assign resectionSpace = resection | split: ' ' %} {% for respace in resectionSpace %} {% if forloop.first %} {% assign reshortcode_template = respace | prepend: 'shortcode-' %} {% else %} {% if forloop.last %} {% assign revariables = revariables | append: respace | append: '||' %} {% else %} {% assign revariables = revariables | append: respace | append: '||' %} {% endif %} {% endif %} {% endfor %} {% capture reoutput %} {% assign rebuildVariables = revariables | split: '||' %} {% include reshortcode_template revariable: rebuildVariables %} {% endcapture %} {% if reoutput contains 'Liquid error' %} [{{ reshortcodeFull }}] {% else %} {{reoutput}} {% endif %} {% else %} {% assign resectionSpace = resection | split: ' ' %} {% for respace in resectionSpace %} {% if forloop.first %} {% assign reshortcode_template = resectionSpace.first | prepend: 'shortcode-' %} {% else %} {% if forloop.last %} {% assign keys = keys | append: respace | replace: '=', ''| append: '||' %} {% else %} {% assign keys = keys | append: "nokey_" | append: respace | replace: '=', ''| append: '||' %} {% assign revariables = revariables | append: respace | append: '||' %} {% endif %} {% endif %} {% endfor %} {% endif %} {% else %} {% if forloop.last %} {% assign revariables = revariables | append: resection %} {% assign revariablesFinal = revariables | split: '||' %} {% assign rekeysFinal = keys | replace: ' ', '' | split: '||' %} {% capture reoutput %}{% include reshortcode_template revariable: revariablesFinal key: rekeysFinal %}{% endcapture %} {% if reoutput contains 'Liquid error' %} [{{ reshortcodeFull }}] {% else %} {{reoutput}} {% endif %} {% else %} {% if rethecycle == 'even' %} {% assign revariables = revariables | append: resection | append: '||' %} {% endif %} {% if rethecycle == 'odd' %} {% assign keys = keys | append: resection | replace: '=', ''| append: '||' %} {% endif %} {% endif %} {% endif %} {% endfor %} {{reshortcodeEnds[1]}} {% endif %} {% endfor %} {% else %} {{ reload }} {% endif %} 